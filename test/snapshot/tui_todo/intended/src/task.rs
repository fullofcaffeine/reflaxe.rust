// Generated by reflaxe.rust (POC)

use crate::HxRef;
use std::cell::RefCell;
use std::rc::Rc;

pub const __HX_TYPE_ID: u32 = 0xad9a8cc0u32;

#[derive(Debug)]

pub struct Task {
    pub text: String,
    pub done: bool,
}

impl Task {
    pub fn new(text: String, done: bool) -> HxRef<Task> {
        let mut self_: HxRef<Task> = Rc::new(RefCell::new(Task {
            text: String::new(),
            done: false,
        }));
        {
            let __tmp = text;
            self_.borrow_mut().text = __tmp.clone();
            __tmp
        };
        {
            let __tmp = done;
            self_.borrow_mut().done = __tmp.clone();
            __tmp
        };
        return self_;
    }

    pub fn toggle(self_: &RefCell<Task>) {
        {
            let __tmp = !self_.borrow().done;
            self_.borrow_mut().done = __tmp.clone();
            __tmp
        };
    }

    pub fn line(self_: &RefCell<Task>, selected: bool) -> String {
        let mut sel: String = if selected {
            String::from(">")
        } else {
            String::from(" ")
        };
        let mut mark: String = if self_.borrow().done {
            String::from("x")
        } else {
            String::from(" ")
        };
        return format!(
            "{}{}",
            format!(
                "{}{}",
                format!("{}{}", format!("{}{}", sel, String::from("[")), mark),
                String::from("] ")
            ),
            self_.borrow().text.clone()
        );
    }
}
