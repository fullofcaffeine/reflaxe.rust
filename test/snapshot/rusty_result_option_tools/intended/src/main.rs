// Generated by reflaxe.rust (POC)

#![allow(dead_code)]

type HxRef<T> = std::rc::Rc<std::cell::RefCell<T>>;

mod rust_option_tools;
mod rust_result_tools;
mod sys;

fn main() {
    let o: Option<i32> = Option::Some(10);
    let n: i32 = {
        let o_2: Option<i32> = {
            let _g: Option<i32> = match o.clone() {
                Option::Some(_) => {
                    let _g_2: i32 = match o.clone() {
                        Option::Some(__p) => __p,
                        _ => unreachable!(),
                    };
                    {
                        let v: i32 = _g_2;
                        Option::Some(v + 1)
                    }
                }
                Option::None => Option::None,
            };
            match _g.clone() {
                Option::Some(_) => {
                    let _g_3: i32 = match _g.clone() {
                        Option::Some(__p) => __p,
                        _ => unreachable!(),
                    };
                    {
                        let v_2: i32 = _g_3;
                        if v_2 > 0 {
                            Option::Some(v_2 * 2)
                        } else {
                            Option::None
                        }
                    }
                }
                Option::None => Option::None,
            }
        };
        match o_2.clone() {
            Option::Some(_) => {
                let _g_4: i32 = match o_2.clone() {
                    Option::Some(__p) => __p,
                    _ => unreachable!(),
                };
                {
                    let v_3: i32 = _g_4;
                    v_3
                }
            }
            Option::None => 0,
        }
    };
    let r: Result<i32, String> = Result::Ok(n);
    let r2: Result<i32, String> = {
        let _g_5: Result<i32, String> = match r.clone() {
            Result::Ok(_) => {
                let _g_6: i32 = match r.clone() {
                    Result::Ok(__p) => __p,
                    _ => unreachable!(),
                };
                {
                    let v_4: i32 = _g_6;
                    Result::Ok(v_4 + 5)
                }
            }
            Result::Err(_) => {
                let _g_7: String = match r.clone() {
                    Result::Err(__p) => __p,
                    _ => unreachable!(),
                };
                {
                    let _e: String = _g_7;
                    Result::Err(_e.clone())
                }
            }
        };
        match _g_5.clone() {
            Result::Ok(_) => {
                let _g_8: i32 = match _g_5.clone() {
                    Result::Ok(__p) => __p,
                    _ => unreachable!(),
                };
                {
                    let v_5: i32 = _g_8;
                    if v_5 > 100 {
                        Result::Err(String::from("too big").clone())
                    } else {
                        Result::Ok(v_5)
                    }
                }
            }
            Result::Err(_) => {
                let _g_9: String = match _g_5.clone() {
                    Result::Err(__p) => __p,
                    _ => unreachable!(),
                };
                {
                    let _e_2: String = _g_9;
                    Result::Err(_e_2.clone())
                }
            }
        }
    };
    let msg: i32 = match r2.clone() {
        Result::Ok(_) => {
            let _g_10: i32 = match r2.clone() {
                Result::Ok(__p) => __p,
                _ => unreachable!(),
            };
            {
                let v_6: i32 = _g_10;
                v_6
            }
        }
        Result::Err(_) => {
            let _g_11: String = match r2.clone() {
                Result::Err(__p) => __p,
                _ => unreachable!(),
            };
            {
                let _e_3: String = _g_11;
                -1
            }
        }
    };
    println!("{}", msg);
    let caught: Result<i32, String> = match hxrt::exception::catch_unwind(|| {
        Result::Ok({
            let x: i32 = 1;
            if x == 1 {
                hxrt::exception::throw(hxrt::dynamic::from(String::from("boom")))
            };
            x
        })
    }) {
        Ok(__hx_ok) => __hx_ok,
        Err(__hx_ex) => {
            let e: hxrt::dynamic::Dynamic = __hx_ex;
            Result::Err(format!("{:?}", e).clone())
        }
    };
    match caught.clone() {
        Result::Ok(_) => {
            let _g_12: i32 = match caught.clone() {
                Result::Ok(__p) => __p,
                _ => unreachable!(),
            };
            {
                let v_7: i32 = _g_12;
                println!("{}", v_7);
            };
        }
        Result::Err(_) => {
            let _g_13: String = match caught.clone() {
                Result::Err(__p) => __p,
                _ => unreachable!(),
            };
            {
                let e_2: String = _g_13;
                println!("{}", e_2);
            };
        }
    };
}
