// Generated by reflaxe.rust (POC)

#![allow(dead_code)]

type HxRef<T> = std::rc::Rc<std::cell::RefCell<T>>;

mod sys;
mod sys_file_system;
mod sys_io_file;

fn main() {
    println!("{}", String::from("--- args ---"));
    println!("{}", crate::sys::Sys::args().len() as i32);
    println!("{}", String::from("--- file content ---"));
    let path: String = String::from("tmp_sys_io.txt");
    crate::sys_io_file::File::save_content(path.clone(), String::from("hello"));
    println!("{}", crate::sys_io_file::File::get_content(path.clone()));
    println!(
        "{}",
        crate::sys_file_system::FileSystem::exists(path.clone())
    );
    crate::sys_file_system::FileSystem::delete_file(path.clone());
    println!(
        "{}",
        crate::sys_file_system::FileSystem::exists(path.clone())
    );
    println!("{}", String::from("--- file bytes ---"));
    let bin: String = String::from("tmp_sys_io.bin");
    let bytes: crate::HxRef<hxrt::bytes::Bytes> = std::rc::Rc::new(std::cell::RefCell::new(
        hxrt::bytes::Bytes::of_string(String::from("ABC").as_str()),
    ));
    crate::sys_io_file::File::save_bytes(bin.clone(), bytes.clone());
    let bytes2: crate::HxRef<hxrt::bytes::Bytes> = crate::sys_io_file::File::get_bytes(bin.clone());
    println!("{}", bytes2.borrow().to_string());
    crate::sys_file_system::FileSystem::delete_file(bin.clone());
    println!("{}", String::from("--- dir listing ---"));
    let dir: String = String::from("tmp_sys_dir");
    crate::sys_file_system::FileSystem::create_directory(dir.clone());
    crate::sys_io_file::File::save_content(
        format!("{}{}", dir, String::from("/a.txt")).clone(),
        String::from("a"),
    );
    crate::sys_io_file::File::save_content(
        format!("{}{}", dir, String::from("/b.txt")).clone(),
        String::from("b"),
    );
    let entries: Vec<String> = crate::sys_file_system::FileSystem::read_directory(dir.clone());
    let mut found_a: bool = false;
    let mut found_b: bool = false;
    let mut found_dot: bool = false;
    let mut found_dot_dot: bool = false;
    {
        let mut _g: i32 = 0;
        while _g < entries.len() as i32 {
            let e: String = entries[_g as usize].clone();
            {
                _g = _g + 1;
                _g
            };
            if e == String::from("a.txt") {
                found_a = true;
            };
            if e == String::from("b.txt") {
                found_b = true;
            };
            if e == String::from(".") {
                found_dot = true;
            };
            if e == String::from("..") {
                found_dot_dot = true;
            };
        }
    };
    println!("{}", found_a);
    println!("{}", found_b);
    println!("{}", found_dot);
    println!("{}", found_dot_dot);
    crate::sys_file_system::FileSystem::delete_file(
        format!("{}{}", dir, String::from("/a.txt")).clone(),
    );
    crate::sys_file_system::FileSystem::delete_file(
        format!("{}{}", dir, String::from("/b.txt")).clone(),
    );
    crate::sys_file_system::FileSystem::delete_directory(dir.clone());
    println!(
        "{}",
        crate::sys_file_system::FileSystem::exists(dir.clone())
    );
}
