// Generated by reflaxe.rust (POC)

pub const __HX_TYPE_ID: u32 = 0xedbd9a5cu32;

#[derive(Debug)]

pub struct SqliteResultSet {
    pub length: i32,
    pub nfields: i32,
    res: crate::HxRef<hxrt::db::QueryResult>,
}

impl SqliteResultSet {
    pub fn new(
        res: crate::HxRef<hxrt::db::QueryResult>,
    ) -> crate::HxRef<crate::sys_db_sqlite_sqlite_result_set::SqliteResultSet> {
        let self_: crate::HxRef<crate::sys_db_sqlite_sqlite_result_set::SqliteResultSet> =
            crate::HxRc::new(crate::HxRefCell::new(SqliteResultSet {
                length: 0,
                nfields: 0,
                res: res,
            }));
        return self_;
    }

    pub fn get_length(self_: &crate::HxRefCell<SqliteResultSet>) -> i32 {
        return hxrt::db::query_result_length(&self_.borrow().res.clone());
    }

    pub fn get_nfields(self_: &crate::HxRefCell<SqliteResultSet>) -> i32 {
        return hxrt::db::query_result_nfields(&self_.borrow().res.clone());
    }

    pub fn has_next(self_: &crate::HxRefCell<SqliteResultSet>) -> bool {
        return hxrt::db::query_result_has_next(&self_.borrow().res.clone());
    }

    pub fn next(self_: &crate::HxRefCell<SqliteResultSet>) -> hxrt::dynamic::Dynamic {
        return hxrt::db::query_result_next_row_object(&self_.borrow().res.clone());
    }

    pub fn results(
        self_: &crate::HxRefCell<SqliteResultSet>,
    ) -> crate::HxRef<crate::haxe_ds_list::List<hxrt::dynamic::Dynamic>> {
        let l: crate::HxRef<crate::haxe_ds_list::List<hxrt::dynamic::Dynamic>> =
            crate::haxe_ds_list::List::<hxrt::dynamic::Dynamic>::new();
        while crate::sys_db_sqlite_sqlite_result_set::SqliteResultSet::has_next(&self_) {
            crate::haxe_ds_list::List::add(
                &l,
                crate::sys_db_sqlite_sqlite_result_set::SqliteResultSet::next(&self_),
            );
        }
        return l;
    }

    pub fn get_result(self_: &crate::HxRefCell<SqliteResultSet>, n: i32) -> String {
        return hxrt::db::query_result_get_result(&self_.borrow().res.clone(), n);
    }

    pub fn get_int_result(self_: &crate::HxRefCell<SqliteResultSet>, n: i32) -> i32 {
        return hxrt::db::query_result_get_int_result(&self_.borrow().res.clone(), n);
    }

    pub fn get_float_result(self_: &crate::HxRefCell<SqliteResultSet>, n: i32) -> f64 {
        return hxrt::db::query_result_get_float_result(&self_.borrow().res.clone(), n);
    }

    pub fn get_fields_names(
        self_: &crate::HxRefCell<SqliteResultSet>,
    ) -> Option<hxrt::array::Array<String>> {
        return {
            let n = hxrt::db::query_result_nfields(&self_.borrow().res.clone());
            if n == 0 {
                None
            } else {
                Some(hxrt::db::query_result_fields(&self_.borrow().res.clone()))
            }
        };
    }
}

impl crate::sys_db_result_set::ResultSet for crate::HxRefCell<SqliteResultSet> {
    fn get_length(&self) -> i32 {
        SqliteResultSet::get_length(self)
    }
    fn get_nfields(&self) -> i32 {
        SqliteResultSet::get_nfields(self)
    }
    fn has_next(&self) -> bool {
        SqliteResultSet::has_next(self)
    }
    fn next(&self) -> hxrt::dynamic::Dynamic {
        SqliteResultSet::next(self)
    }
    fn results(&self) -> crate::HxRef<crate::haxe_ds_list::List<hxrt::dynamic::Dynamic>> {
        SqliteResultSet::results(self)
    }
    fn get_result(&self, n: i32) -> String {
        SqliteResultSet::get_result(self, n)
    }
    fn get_int_result(&self, n: i32) -> i32 {
        SqliteResultSet::get_int_result(self, n)
    }
    fn get_float_result(&self, n: i32) -> f64 {
        SqliteResultSet::get_float_result(self, n)
    }
    fn get_fields_names(&self) -> Option<hxrt::array::Array<String>> {
        SqliteResultSet::get_fields_names(self)
    }
}
