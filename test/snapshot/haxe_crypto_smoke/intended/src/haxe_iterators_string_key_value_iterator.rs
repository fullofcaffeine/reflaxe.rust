// Generated by reflaxe.rust (POC)

pub const __HX_TYPE_ID: u32 = 0x0a67ae35u32;

#[derive(Debug)]

pub struct StringKeyValueIterator {
    offset: i32,
    s: hxrt::string::HxString,
}

impl StringKeyValueIterator {
    pub fn new(
        s: hxrt::string::HxString,
    ) -> crate::HxRef<crate::haxe_iterators_string_key_value_iterator::StringKeyValueIterator> {
        let self_: crate::HxRef<
            crate::haxe_iterators_string_key_value_iterator::StringKeyValueIterator,
        > = crate::HxRef::new(StringKeyValueIterator { offset: 0, s: s });
        return self_;
    }

    pub fn has_next(self_: &crate::HxRefCell<StringKeyValueIterator>) -> bool {
        let __hx_this: crate::HxRef<
            crate::haxe_iterators_string_key_value_iterator::StringKeyValueIterator,
        > = self_.self_ref();
        return ({
            let __b = __hx_this.borrow();
            __b.offset
        }) < hxrt::string::len(
            ({
                let __b = __hx_this.borrow();
                __b.s.clone()
            })
            .as_str(),
        );
    }

    pub fn next(
        self_: &crate::HxRefCell<StringKeyValueIterator>,
    ) -> hxrt::iter::KeyValue<i32, i32> {
        let __hx_this: crate::HxRef<
            crate::haxe_iterators_string_key_value_iterator::StringKeyValueIterator,
        > = self_.self_ref();
        return hxrt::iter::KeyValue {
            key: {
                let __b = __hx_this.borrow();
                __b.offset
            },
            value: crate::string_tools::StringTools::fast_code_at(
                hxrt::string::HxString::from({
                    let __b = __hx_this.borrow();
                    __b.s.clone()
                }),
                {
                    let __tmp = self_.borrow().offset;
                    self_.borrow_mut().offset = __tmp + 1;
                    __tmp
                },
            ),
        };
    }
}
