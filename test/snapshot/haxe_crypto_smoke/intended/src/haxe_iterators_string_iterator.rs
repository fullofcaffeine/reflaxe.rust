// Generated by reflaxe.rust (POC)

pub const __HX_TYPE_ID: u32 = 0xee4111fdu32;

#[derive(Debug)]

pub struct StringIterator {
    offset: i32,
    s: String,
}

impl StringIterator {
    pub fn new(s: String) -> crate::HxRef<crate::haxe_iterators_string_iterator::StringIterator> {
        let self_: crate::HxRef<crate::haxe_iterators_string_iterator::StringIterator> =
            crate::HxRef::new(StringIterator { offset: 0, s: s });
        return self_;
    }

    pub fn has_next(self_: &crate::HxRefCell<StringIterator>) -> bool {
        let __hx_this: crate::HxRef<crate::haxe_iterators_string_iterator::StringIterator> =
            self_.self_ref();
        return ({
            let __b = __hx_this.borrow();
            __b.offset
        }) < hxrt::string::len(
            ({
                let __b = __hx_this.borrow();
                __b.s.clone()
            })
            .as_str(),
        );
    }

    pub fn next(self_: &crate::HxRefCell<StringIterator>) -> i32 {
        let __hx_this: crate::HxRef<crate::haxe_iterators_string_iterator::StringIterator> =
            self_.self_ref();
        return {
            let s: String = {
                let __b = __hx_this.borrow();
                __b.s.clone()
            };
            let index: i32 = {
                let __tmp = self_.borrow().offset;
                self_.borrow_mut().offset = __tmp + 1;
                __tmp
            };
            crate::string_tools::StringTools::fast_code_at(s, index)
        };
    }
}
