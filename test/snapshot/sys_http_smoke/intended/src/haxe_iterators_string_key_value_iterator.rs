// Generated by reflaxe.rust (POC)

pub const __HX_TYPE_ID: u32 = 0x0a67ae35u32;

#[derive(Debug)]

pub struct StringKeyValueIterator {
    offset: i32,
    s: String,
}

impl StringKeyValueIterator {
    pub fn new(
        s: String,
    ) -> crate::HxRef<crate::haxe_iterators_string_key_value_iterator::StringKeyValueIterator> {
        let self_: crate::HxRef<
            crate::haxe_iterators_string_key_value_iterator::StringKeyValueIterator,
        > = crate::HxRc::new(crate::HxRefCell::new(StringKeyValueIterator {
            offset: 0,
            s: s,
        }));
        return self_;
    }

    pub fn has_next(self_: &crate::HxRefCell<StringKeyValueIterator>) -> bool {
        return self_.borrow().offset < hxrt::string::len(self_.borrow().s.clone().as_str());
    }

    pub fn next(
        self_: &crate::HxRefCell<StringKeyValueIterator>,
    ) -> hxrt::iter::KeyValue<i32, i32> {
        return hxrt::iter::KeyValue {
            key: self_.borrow().offset,
            value: crate::string_tools::StringTools::fast_code_at(self_.borrow().s.clone(), {
                let __tmp = self_.borrow().offset;
                self_.borrow_mut().offset = __tmp + 1;
                __tmp
            }),
        };
    }
}
